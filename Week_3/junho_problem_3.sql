-- (https://school.programmers.co.kr/learn/courses/30/lessons/299310, Lv.3)

SELECT A.YEAR, (B.maximum - A.SIZE_OF_COLONY) as YEAR_DEV, A.ID
FROM (
    SELECT ID, YEAR(DIFFERENTIATION_DATE) AS YEAR, SIZE_OF_COLONY
    FROM ECOLI_DATA) AS A
JOIN (SELECT YEAR(DIFFERENTIATION_DATE) AS YEAR, MAX(SIZE_OF_COLONY) AS maximum
        FROM ECOLI_DATA
        GROUP BY YEAR) AS B
ON A.YEAR = B.YEAR
ORDER BY A.YEAR, YEAR_DEV;
